import{r as g,j as e,P as p}from"./vendor-d0eccd61.js";import{S as $}from"./index-ed6a5d7d.js";import{P as q}from"./PageHead-9dd9e60a.js";const w={제주시:[{name:"한림읍",x:48,y:36},{name:"애월읍",x:49,y:37},{name:"구좌읍",x:59,y:33},{name:"조천읍",x:59,y:38},{name:"한경면",x:46,y:35},{name:"추자면",x:48,y:48},{name:"우도면",x:60,y:38},{name:"일도동",x:53,y:38},{name:"이도동",x:53,y:38},{name:"삼도동",x:53,y:38},{name:"용담동",x:52,y:38},{name:"건입동",x:53,y:38},{name:"화북동",x:53,y:38},{name:"삼양동",x:54,y:38},{name:"봉개동",x:53,y:38},{name:"아라동",x:54,y:37},{name:"오라동",x:52,y:38},{name:"연동",x:52,y:38},{name:"노형동",x:52,y:38},{name:"외도동",x:51,y:38},{name:"이호동",x:51,y:38},{name:"도두동",x:52,y:38}],서귀포시:[{name:"대정읍/마라도",x:48,y:32},{name:"남원읍",x:56,y:33},{name:"성산읍",x:60,y:37},{name:"안덕면",x:49,y:32},{name:"표선면",x:58,y:34},{name:"송산동",x:53,y:32},{name:"정방동",x:53,y:32},{name:"중앙동",x:53,y:32},{name:"천지동",x:53,y:32},{name:"효돈동",x:54,y:33},{name:"영천동",x:54,y:33},{name:"동홍동",x:53,y:33},{name:"서홍동",x:53,y:33},{name:"대륜동",x:52,y:32},{name:"대천동",x:52,y:32},{name:"중문동",x:51,y:32},{name:"예래동",x:50,y:32}]};function P({onCityChange:s,onSublocationChange:n,onCoordinatesChange:x}){const[o,c]=g.useState(""),[l,t]=g.useState(""),[r,a]=g.useState({x:52,y:38}),d=i=>{c(i.target.value),a({x:null,y:null}),s(i.target.value)},y=i=>{t(i.target.value),n(i.target.value);const h=w[o].find(j=>j.name===i.target.value);h&&(a({x:h.x,y:h.y}),x({x:h.x,y:h.y}))};return e.jsxs("div",{className:"flex flex-row gap-x-10",children:[e.jsx("p",{className:"text-xl text-center",children:"지역을 선택해주세요"}),e.jsxs("select",{name:"city",className:"mx-3",onChange:d,children:[e.jsx("option",{children:"- 시 -"}),Object.keys(w).map(i=>e.jsx("option",{value:i,children:i},i))]}),e.jsxs("select",{name:"sublocation",onChange:y,children:[e.jsx("option",{children:"- 동/읍 -"}),(w[o]||[]).map(i=>e.jsx("option",{value:i.name,children:i.name},i.name))]})]})}P.propTypes={onCityChange:p.func,onSublocationChange:p.func,onCoordinatesChange:p.func};function V({data:s}){var d,y,i,h,j,N,m,f;if(g.useEffect(()=>{console.log("data has changed:",s)},[s]),console.log("data:",s),!s.response)return e.jsx("div",{className:"grid place-content-center h-[600px]",children:e.jsx($,{size:160})});const n=(h=(i=(y=(d=s==null?void 0:s.response)==null?void 0:d.body)==null?void 0:y.items)==null?void 0:i.item[5])==null?void 0:h.fcstValue;let x="",o="",c="";n<=5?(x="https://frontendschool6.github.io/finalize-react-6/weather/clear.svg",o="맑음",c="맑음"):n>=6&&n<=8?(x="https://frontendschool6.github.io/finalize-react-6/weather/partly_cloudy.svg",o="구름 많음",c="구름 많음"):(x="https://frontendschool6.github.io/finalize-react-6/weather/cloudy.svg",o="흐림",c="흐림");const l=(f=(m=(N=(j=s==null?void 0:s.response)==null?void 0:j.body)==null?void 0:N.items)==null?void 0:m.item[6])==null?void 0:f.fcstValue;console.log("rain:",l);let t="",r="",a="";return l===1?(t="https://frontendschool6.github.io/finalize-react-6/weather/rain.svg",r="비",a="비"):l===2?(t="https://frontendschool6.github.io/finalize-react-6/weather/snow.svg",r="비 또는 눈",a="비 또는 눈"):l===3?(t="https://frontendschool6.github.io/finalize-react-6/weather/snow.svg",r="눈",a="눈"):l===4&&(t="https://frontendschool6.github.io/finalize-react-6/weather/rain.svg",r="소나기",a="소나기"),e.jsxs("div",{className:"flex gap-24  justify-center items-center",children:[e.jsxs("div",{className:"flex flex-col justify-center items-center",children:[e.jsx("img",{src:x,alt:o,className:"w-[120px] h-[120px]"}),c]}),l!==0&&t&&e.jsxs("div",{className:"flex flex-col justify-center items-center",children:[e.jsx("img",{src:t,alt:r,className:"w-[120px] h-[120px]"}),a]})]})}V.propTypes={data:p.object.isRequired};function D({data:s,category:n,text:x}){var o,c;return s.response?e.jsx(e.Fragment,{children:(c=(o=s==null?void 0:s.response)==null?void 0:o.body)==null?void 0:c.items.item.filter(l=>parseInt(l.fcstTime.slice(0,2),10)%3===0&&l.category===n).slice(0,8).map(l=>{let t;if(n==="SKY"){const r=parseInt(l.fcstValue);r<=5?t="맑음":r>=6&&r<=8?t="구름 많음":r>=9&&(t="흐림")}else if(n==="PTY"){const r=parseInt(l.fcstValue);r===0?t="없음":r===1?t="비":r===2?t="비 또는 눈":r===3?t="눈":r===4&&(t="소나기")}else t=`${parseInt(l.fcstValue)}${x}`;return e.jsx("td",{className:"border-2",children:t},`${l.fcstDate}-${l.fcstTime}`)})}):e.jsx("div",{className:"grid place-content-center h-[600px]",children:e.jsx($,{size:160})})}D.propTypes={data:p.object.isRequired,category:p.string.isRequired,text:p.string};function R({data:s}){var n,x,o;return s.response?e.jsxs(e.Fragment,{children:[e.jsxs("table",{className:"border-2 w-2/3 text-center text-xl",children:[e.jsx("thead",{className:"border-2",children:e.jsxs("tr",{className:"bg-lightsand",children:[e.jsx("th",{className:"border-2 h-[50px]"}),(o=(x=(n=s==null?void 0:s.response)==null?void 0:n.body)==null?void 0:x.items)==null?void 0:o.item.filter(c=>parseInt(c.fcstTime.slice(0,2),10)%3===0&&c.category==="TMP").slice(0,8).map(c=>{const t=`${parseInt(c.fcstTime.slice(0,2),10)}시`;return e.jsx("th",{className:"border-2",children:t},`${c.fcstDate}-${c.fcstTime}`)})]})}),e.jsxs("tbody",{className:"border-2",children:[e.jsxs("tr",{children:[e.jsx("th",{className:"border-2 h-[50px]",children:"기온"}),e.jsx(D,{data:s,category:"TMP",text:"°C"})]}),e.jsxs("tr",{className:"bg-lightsand",children:[e.jsx("th",{className:"border-2 h-[50px]",children:"하늘 상태"}),e.jsx(D,{data:s,category:"SKY"})]}),e.jsxs("tr",{children:[e.jsx("th",{className:"border-2 h-[50px]",children:"습도"}),e.jsx(D,{data:s,category:"REH",text:"%"})]}),e.jsxs("tr",{className:"bg-lightsand",children:[e.jsx("th",{className:"border-2 h-[50px]",children:"강수 형태"}),e.jsx(D,{data:s,category:"PTY"})]}),e.jsxs("tr",{children:[e.jsx("th",{className:"border-2 h-[50px]",children:"강수 확률"}),e.jsx(D,{data:s,category:"POP",text:"%"})]}),e.jsxs("tr",{className:"bg-lightsand",children:[e.jsx("th",{className:"border-2 h-[50px]",children:"풍속"}),e.jsx(D,{data:s,category:"WSD",text:"m/s"})]})]})]}),e.jsx("span",{className:"w-2/3 text-right mt-[-30px]",children:"풍속: 4미만(약함), 4이상 9미만(약간 강함), 9이상 14미만(강함), 14이상(매우강함)"})]}):e.jsx("div",{className:"grid place-content-center h-[600px]",children:e.jsx($,{size:160})})}R.propTypes={data:p.object.isRequired};function M({data:s}){var n,x,o,c,l,t,r,a,d,y,i,h,j,N,m,f;return s.response?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-5xl",children:[(c=(o=(x=(n=s==null?void 0:s.response)==null?void 0:n.body)==null?void 0:x.items)==null?void 0:o.item[0])==null?void 0:c.fcstValue,"°C"]}),e.jsx(V,{data:s}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-xl px-10",children:["💧 습도 ",(a=(r=(t=(l=s==null?void 0:s.response)==null?void 0:l.body)==null?void 0:t.items)==null?void 0:r.item[10])==null?void 0:a.fcstValue,"%"]}),e.jsxs("span",{className:"text-xl px-10",children:["☔️ 강수확률 ",(h=(i=(y=(d=s==null?void 0:s.response)==null?void 0:d.body)==null?void 0:y.items)==null?void 0:i.item[7])==null?void 0:h.fcstValue,"%"]}),e.jsxs("span",{className:"text-xl px-10",children:["🌪️ 풍속 ",(f=(m=(N=(j=s==null?void 0:s.response)==null?void 0:j.body)==null?void 0:N.items)==null?void 0:m.item[4])==null?void 0:f.fcstValue,"m/s"]})]}),e.jsx(R,{data:s})]}):e.jsx("div",{className:"grid place-content-center h-[600px]",children:e.jsx($,{size:160})})}M.propTypes={data:p.object.isRequired};function v({data:s,category:n,text:x}){var c,l;if(!s.response)return e.jsx("div",{className:"grid place-content-center h-[600px]",children:e.jsx($,{size:160})});const o=(l=(c=s==null?void 0:s.response)==null?void 0:c.body)==null?void 0:l.items.item.filter(t=>(n==="TMN"?t.fcstTime==="0600":t.fcstTime==="1500")&&t.category===n);return e.jsx(e.Fragment,{children:o.map(t=>{let r;if(n==="SKY"){const a=parseInt(t.fcstValue);a<=5?r="맑음":a>=6&&a<=8?r="구름 많음":a>=9&&(r="흐림")}else if(n==="PTY"){const a=parseInt(t.fcstValue);a===0?r="없음":a===1?r="비":a===2?r="비 또는 눈":a===3?r="눈":r="소나기"}else r=`${parseInt(t.fcstValue)}${x}`;return e.jsx("td",{className:"border-2",children:r},`${t.fcstDate}-${t.fcstTime}`)})})}v.propTypes={data:p.object.isRequired,category:p.string.isRequired,text:p.string};function Y({coordinates:s}){var o,c,l;const[n,x]=g.useState({});return g.useEffect(()=>{const t="http://apis.data.go.kr/1360000/VilageFcstInfoService_2.0/getVilageFcst",r="4vq6kWslvJHgm6Z3JNfZ797PVPnMRYzMInRfcfx9volp2z1Dxf9qMU49eqXJ590RXLgYbOTjSQ1aC0easyCbUw%3D%3D",a=new Date,d=a.getFullYear(),y=String(a.getMonth()+1).padStart(2,"0"),i=String(a.getDate()).padStart(2,"0");let h=`${d}${y}${i}`;if(a.getHours()<2){const m=new Date(a);m.setDate(m.getDate()-1);const f=m.getFullYear(),T=String(m.getMonth()+1).padStart(2,"0"),u=String(m.getDate()).padStart(2,"0");h=`${f}${T}${u}`}async function N(){const{x:m,y:f}=s,T=`${t}?serviceKey=${r}&pageNo=1&numOfRows=1500&dataType=JSON&base_date=${h}&base_time=0200&nx=${m}&ny=${f}`;try{const u=await fetch(T);if(!u.ok)throw new Error(`HTTP error! Status: ${u.status}`);const C=await u.json();x(C)}catch(u){console.error("Error fetching data:",u)}}N()},[s]),e.jsxs(e.Fragment,{children:[e.jsxs("table",{className:"border-2 w-2/3 text-center text-xl",children:[e.jsx("thead",{className:"border-2",children:e.jsxs("tr",{className:"bg-lightsand",children:[e.jsx("th",{className:"border-2 h-[50px]"}),(l=(c=(o=n==null?void 0:n.response)==null?void 0:o.body)==null?void 0:c.items)==null?void 0:l.item.filter(t=>!!(t.fcstDate&&t.category==="TMX")).map(t=>{const r=parseInt(t.fcstDate.slice(4,6),10),a=parseInt(t.fcstDate.slice(6),10);return e.jsx("th",{className:"border-2",children:`${r}/${a}`},`${t.fcstDate}-${t.fcstTime}-${t.category}`)})]})}),e.jsxs("tbody",{className:"border-2",children:[e.jsxs("tr",{children:[e.jsxs("th",{className:"border-2 h-[50px]",children:["최",e.jsx("span",{className:"text-red-600",children:"고"})," 기온"]}),n&&e.jsx(v,{data:n,category:"TMX",text:"°C"})]}),e.jsxs("tr",{children:[e.jsxs("th",{className:"border-2 h-[50px]",children:["최",e.jsx("span",{className:"text-sky-600",children:"저"})," 기온"]}),e.jsx(v,{data:n,category:"TMN",text:"°C"})]}),e.jsxs("tr",{className:"bg-lightsand",children:[e.jsx("th",{className:"border-2 h-[50px]",children:"하늘 상태"}),e.jsx(v,{data:n,category:"SKY"})]}),e.jsxs("tr",{children:[e.jsx("th",{className:"border-2 h-[50px]",children:"습도"}),e.jsx(v,{data:n,category:"REH",text:"%"})]}),e.jsxs("tr",{className:" bg-lightsand",children:[e.jsx("th",{className:"border-2 h-[50px]",children:"강수 형태"}),e.jsx(v,{data:n,category:"PTY"})]}),e.jsxs("tr",{children:[e.jsx("th",{className:"border-2 h-[50px]",children:"강수 확률"}),e.jsx(v,{data:n,category:"POP",text:"%"})]}),e.jsxs("tr",{className:"bg-lightsand",children:[e.jsx("th",{className:"border-2 h-[50px]",children:"풍속"}),e.jsx(v,{data:n,category:"WSD",text:"m/s"})]})]})]}),e.jsx("span",{className:"w-2/3 text-right mt-[-30px]",children:"풍속: 4미만(약함), 4이상 9미만(약간 강함), 9이상 14미만(강함), 14이상(매우강함)"})]})}Y.propTypes={coordinates:p.object.isRequired};function E(){var a;const[s,n]=g.useState({}),[x,o]=g.useState(""),[c,l]=g.useState(""),[t,r]=g.useState({x:52,y:38});return g.useEffect(()=>{const d="http://apis.data.go.kr/1360000/VilageFcstInfoService_2.0/getVilageFcst",y="4vq6kWslvJHgm6Z3JNfZ797PVPnMRYzMInRfcfx9volp2z1Dxf9qMU49eqXJ590RXLgYbOTjSQ1aC0easyCbUw%3D%3D",i=new Date,h=i.getFullYear(),j=String(i.getMonth()+1).padStart(2,"0"),N=String(i.getDate()).padStart(2,"0");let m=`${h}${j}${N}`;const f=i.getHours(),T=["0200","0500","0800","1100","1400","1700","2000","2300"];let u;if(f<2){const b=new Date(i);b.setDate(b.getDate()-1);const S=b.getFullYear(),I=String(b.getMonth()+1).padStart(2,"0"),z=String(b.getDate()).padStart(2,"0");m=`${S}${I}${z}`,u="2300"}else{const b=T.findIndex(S=>f<parseInt(S.slice(0,2)));u=b!==-1?T[b-1]:"2300"}async function C(){const b=`${d}?serviceKey=${y}&pageNo=1&numOfRows=1500&dataType=JSON&base_date=${m}&base_time=${u}&nx=${t.x}&ny=${t.y}`;try{const S=await fetch(b);if(!S.ok)throw new Error(`HTTP error! Status: ${S.status}`);const I=await S.json();n(I)}catch(S){console.error("Error fetching data:",S)}}C()},[t]),e.jsxs(e.Fragment,{children:[e.jsx(q,{title:"Jeju All in One - 제주 날씨"}),e.jsxs("div",{className:"py-2 mt-5 mb-10",children:[e.jsx("h2",{className:"text-blue font-semibold text-4xl text-center",children:"제주 날씨"}),e.jsxs("div",{className:"flex flex-col justify-center items-center gap-10",children:[e.jsxs("div",{children:[!x&&!c&&e.jsx("p",{className:"mt-10 font-medium text-xl",children:"제주시 용담동"}),c&&((a=w[x])!=null&&a.find(d=>d.name===c))?e.jsxs("p",{className:"mt-10 font-medium text-xl",children:[x," ",c]}):""]}),e.jsx("hr",{className:"w-full"}),e.jsx(P,{onCityChange:o,onSublocationChange:l,onCoordinatesChange:r}),e.jsx(M,{data:s}),e.jsx(Y,{coordinates:t})]})]})]})}export{E as default};
