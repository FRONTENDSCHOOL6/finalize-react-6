import{b as V,r as t,j as e,_ as h}from"./vendor-544b9a11.js";import{u as _,p as b}from"./index-b22ccbb2.js";import{P as D}from"./PageHead-0272f252.js";import{C as E,c as M}from"./data-039b36a2.js";import{S as O,c as U,M as q}from"./Map-1396a8f7.js";const z="/finalize-react-6/assets/image-d581590f.svg";function k(){const j=V();_();const[o,v]=t.useState(null),[d,m]=t.useState(),[y,N]=t.useState(),w=t.useRef(null),f=t.useRef(null),x=t.useRef(null),r=t.useRef(null),n=t.useRef(null),g=t.useRef(null),c=t.useRef(null),u=t.useRef(null);t.useEffect(()=>{m(c.current)},[u,c]);const R=a=>{const{files:i}=a.target,p=Array.from(i).map(s=>({image:URL.createObjectURL(s),label:s.name}));v(p)},S=async a=>{a.preventDefault();const i=f.current.value,p=x.current.value,s=g.current.files,P=n.current.value,A=r.current.value;n||h("태그를 선택해주세요.",{position:"top-center",icon:"🚨",ariaProps:{role:"alert","aria-live":"polite"}}),s[0]||h("사진을 등록해주세요.",{position:"top-center",icon:"🚨",ariaProps:{role:"alert","aria-live":"polite"}});const l=new FormData;l.append("title",i),l.append("content",p),l.append("location",c.current),l.append("address",u.current),l.append("tag",P),l.append("customTag",A),l.set("userId",b.authStore.model.id),s&&l.append("photo",s[0]);try{await b.collection("content").create(l),j("/content/list")}catch(T){console.error(T)}},C=()=>{r.current.value=r.current.value.replace(/(\s+)/g,"_")},F=a=>{n.current.value=a.value};return e.jsxs(e.Fragment,{children:[e.jsx(D,{title:"Jeju All in One - 나만의 제주"}),e.jsx(E,{title:"제주, 나의 ⭐"}),e.jsx("form",{encType:"multipart/form-data",ref:w,onSubmit:S,className:"flex flex-col gap-2 items-center",children:e.jsxs("div",{className:"flex w-4/5 gap-6 mx-auto px-10 mt-10 mb-32 min-w-[1000px]",children:[e.jsxs("div",{className:"relative w-full flex-grow",children:[e.jsx("label",{htmlFor:"photo",className:"sr-only",children:"사진 등록"}),e.jsx("input",{type:"file",accept:"image/jpg,image/png,image/jpeg,image/webp,image/avif",name:"photo",id:"photo",ref:g,onChange:R,className:"absolute w-full h-full opacity-0 cursor-pointer"}),e.jsxs("div",{className:"flex gap-2 overflow-x-auto p-2 w-full min-w-[350px] h-full bg-slate-100",children:[!o&&e.jsx("img",{src:z,alt:"photo",className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2"}),o==null?void 0:o.map(a=>e.jsx("img",{src:a.image,alt:a.label,className:"m-auto bg-slate-100 max-h-[660px]"},a.label))]})]}),e.jsxs("div",{className:"w-full flex flex-col gap-2 flex-grow",children:[e.jsxs("div",{className:"w-full",children:[e.jsx("label",{htmlFor:"title",className:"sr-only",children:"제목"}),e.jsx("input",{type:"text",id:"title",name:"title",placeholder:"제목을 입력해주세요",ref:f,className:"w-full py-3 px-4 border rounded-md border-gray-300 focus:outline-none focus:border-lightblue",required:!0})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{htmlFor:"content",className:"sr-only",children:"내용"}),e.jsx("textarea",{type:"text",id:"content",name:"content",placeholder:"내용을 입력해주세요",ref:x,className:"w-full py-3 px-4 min-h-[100px] border rounded-md border-gray focus:outline-none focus:border-lightblue",required:!0})]}),e.jsx(O,{className:"z-10",options:M,styles:U,ref:n,onChange:F,placeholder:"제주도 태그를 선택해주세요"}),e.jsx("input",{type:"text",ref:r,onChange:C,className:"w-full py-3 px-4 border rounded-md border-gray-300 focus:outline-none focus:border-lightblue",placeholder:"나만의 제주도 태그를 만들어주세요.(예: #나의_사랑_제주도)"}),e.jsx(q,{ref:{placeNameRef:c,placeAddressRef:u},place:{placeName:d,placeAddress:y},setPlace:{setPlaceName:m,setPlaceAddress:N}}),e.jsx("div",{children:d}),e.jsx("button",{type:"submit",className:"text-white font-bold bg-lightblue px-4 py-3 rounded-md hover:bg-blue",children:"추억 등록"})]})]})})]})}export{k as default};
