import{j as e,a as r,r as a,L as d}from"./vendor-544b9a11.js";import{u as w,p as N}from"./index-b22ccbb2.js";import{P as y}from"./PageHead-0272f252.js";import{T as p}from"./TitleButton-7f8a457a.js";import{C as j}from"./ContentItem-f8e2b0fc.js";import{g as u}from"./getPbImageURL-68fee321.js";function x({src:c,alt:i,comment:l,date:n}){return e.jsx(e.Fragment,{children:e.jsxs("li",{className:"flex justify-between items-center mb-2",children:[e.jsx("img",{src:c,alt:i,className:"w-12 min-w-12"}),e.jsx("p",{className:"w-20 text-center",children:"⭐"}),e.jsx("p",{className:"w-4/5 overflow-hidden text-ellipsis whitespace-nowrap",children:l}),e.jsx("time",{className:"w-1/6 text-end overflow-hidden text-ellipsis whitespace-nowrap",children:n})]})})}x.propTypes={src:r.string,alt:r.string,comment:r.string,date:r.string};function S(){const{user:c}=w(),[i,l]=a.useState(""),[n,h]=a.useState([]),[s,g]=a.useState([]);return a.useEffect(()=>{async function t(){try{const m=await N.collection("user").getOne(c.id,{expand:"comment,comment.contentId,content"},{requestKey:"string"}),{nickname:f,expand:o}=m;l(f),o&&o.comment&&g(o.comment),o&&o.content&&h(o.content)}catch(m){console.error(m)}}t()},[c.id]),e.jsxs(e.Fragment,{children:[e.jsx(y,{title:"Jeju All in One - 내 프로필"}),e.jsxs("section",{className:"pt-10 font-bold text-lg text-center",children:[i," 님 환영합니다."]}),e.jsxs("section",{className:"mx-10 pt-10",children:[e.jsx(p,{title:"나의 제주",link:"#",count:s.length}),e.jsx("hr",{}),e.jsxs("ul",{className:"my-10 w-11/12 mx-auto contentContainer",children:[(n==null?void 0:n.length)===0&&e.jsx(j,{}),n==null?void 0:n.slice(0,3).map(t=>e.jsx(j,{content:t.id,title:t.title,count:t.commentId.length,src:u(t,"photo")},t.id))]})]}),e.jsxs("section",{className:"mx-10 mb-12",children:[e.jsx(p,{title:"나의 제주의 별",link:"#",count:s.length,section:"댓글"}),e.jsx("hr",{}),e.jsxs("ul",{className:"w-11/12 mx-auto my-10",children:[(s==null?void 0:s.length)===0&&e.jsx(e.Fragment,{children:e.jsx(d,{to:"/content",children:e.jsx(x,{src:"/jejuImage5.jpg",alt:"제주 바다",date:"2023-09-06",comment:"제주를 향한 당신의 별을 우리에게 나누어주세요"})})}),s==null?void 0:s.map(t=>e.jsx(d,{to:`/content/${t.contentId}`,children:e.jsx(x,{src:u(t.expand.contentId,"photo"),alt:t.title,date:t.updated.split(" ")[0],comment:t.comment})},t.id))]})]})]})}export{S as default};
