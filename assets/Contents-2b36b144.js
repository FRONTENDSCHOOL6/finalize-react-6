import{r as o,m as f,j as e,L as b}from"./vendor-544b9a11.js";import{C as u}from"./ContentItem-338270d3.js";import{C as P,c as v}from"./data-039b36a2.js";import{P as y}from"./PageHead-0272f252.js";import{g as C}from"./getPbImageURL-68fee321.js";import{S as N}from"./index-56f9d259.js";const m="/finalize-react-6/assets/right-90d05136.svg",$="/finalize-react-6/assets/rightWhite-db9da3c9.svg";async function S(s){let a="";return s.filter==="(tag='')"?a=`?sort=${s.sort}&page=${s.page}&perPage=${s.perPage}`:a=`?${Object.entries(s).map(([c,r])=>`${encodeURIComponent(c)}=${encodeURIComponent(r)}`).join("&")}`,await(await fetch(`https://react-mission.pockethost.io/api/collections/content/records${a}`)).json()}function q(){var g;const[s,a]=o.useState(1),[l,c]=o.useState(9),[r,k]=o.useState("-created"),[i,d]=o.useState(""),{isLoading:h,data:n,isError:x,error:p}=f({queryKey:["contents",r,i,s,l],queryFn:()=>S({sort:r,filter:`(tag='${i}')`,page:s,perPage:l}),keepPreviousData:!0}),j=t=>{d(t.target.value),a(1)};return h?e.jsx(N,{className:"mx-auto"}):x?e.jsx("div",{role:"alert",children:p.toString()}):e.jsxs(e.Fragment,{children:[e.jsx(y,{title:"Jeju All in One - 나만의 제주"}),e.jsxs("div",{className:"flex flex-col justify-center items-center",children:[e.jsxs("section",{className:"text-center",children:[e.jsx(P,{title:"우리의 제주"}),e.jsx("p",{className:"mt-3",children:"⭐로 우리에게 나누어진 ‘우리의 제주’를 둘러보세요."}),e.jsx(b,{to:"/content/create",children:e.jsxs("button",{type:"button",className:`my-5 inline-flex text-blue rounded-full items-center bg-lightsand gap-2 px-6 py-3 border-2 border-blue \r
              hover:bg-darkblue hover:text-lightsand transform transition-all`,onMouseOver:t=>t.currentTarget.children[1].src=$,onMouseOut:t=>t.currentTarget.children[1].src=m,children:[e.jsx("p",{className:"font-extrabold text-lg",children:"⭐ 나눠주기"}),e.jsx("img",{src:m,alt:"링크 화살표"})]})})]}),e.jsxs("div",{className:"w-11/12 text-right mb-5",children:[e.jsx("button",{onClick:()=>d(""),type:"button",className:"mr-2",children:"모아보기"}),e.jsxs("select",{name:"태그",id:"tagSelect",onChange:j,value:i,children:[e.jsx("option",{children:"- 태그 -"}),v.map(t=>e.jsx("option",{value:t.value,children:t.value},t.value))]})]}),e.jsxs("section",{className:"contentContainer p-1 bg-gray-100 w-11/12",children:[n.items.length===0&&e.jsx(u,{}),(g=n==null?void 0:n.items)==null?void 0:g.map(t=>e.jsx(u,{content:t.id,title:t.title,count:t.commentId.length,src:C(t,"photo")},t.id))]}),e.jsxs("section",{className:"flex justify-center gap-5 my-10",children:[e.jsx("button",{onClick:()=>a(t=>Math.max(t-1,0)),disabled:s===1,className:"disabled:font-extralight font-bold",children:"<"}),e.jsxs("span",{children:[`${s}`,n.totalPages!==1&&n.totalPages!==0&&` / ${n.totalPages}`]}),e.jsx("button",{onClick:()=>{a(t=>t+1)},disabled:s===n.totalPages||n.totalPages===0,className:"disabled:font-extralight font-bold",children:">"})]})]})]})}export{q as default};
